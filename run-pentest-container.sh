#!/bin/bash

# the default container provider is podman
# if you want to use docker instead use "export CONTAINER_PROVIDER=docker"
if [ -z "$CONTAINER_PROVIDER" ]; then
    CONTAINER_PROVIDER=podman
fi

SHARE=""
if [ ! -z "$1" ]; then
    if [ -d "$1" ]; then
        SHARE="$1"
    else
        echo "[!] Invalid share folder $1"
        exit 1
    fi
else
    SHARE=/tmp/contianer-share
    mkdir -p /tmp/contianer-share
fi
echo "[+] Starting Container"
echo "[+] Shared folder: local:$SHARE -> container:/share"
echo "[+] Share other folder with $0 [/path/to/your/local/share]"

"$CONTAINER_PROVIDER" run \
    -it --rm \
    -v "$SHARE":/share:rw,Z \
    --cap-add=CAP_NET_RAW \
    pentest-python 
