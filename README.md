# Pentest Python

A simple pentest container equipped with common python pentest tools.

The following tools are supported:
- [bloodhound.py](https://github.com/fox-it/BloodHound.py)
- [certipy](https://github.com/ly4k/Certipy)
- [coercer](https://github.com/p0dalirius/Coercer)
- [dirsearch](https://github.com/maurosoria/dirsearch)
- [EyeWitness](https://github.com/FortyNorthSecurity/EyeWitness)
- [ffuf](https://github.com/ffuf/ffuf)
- [gobuster](https://github.com/OJ/gobuster)
- [impacket](https://github.com/fortra/impacket)
- [kerbrute](https://github.com/ropnop/kerbrute)
- [ldapdomaindump](https://github.com/dirkjanm/ldapdomaindump)
- [LdapRelayScan](https://github.com/zyn3rgy/LdapRelayScan)
- [NetExec](https://github.com/Pennyw0rth/NetExec)
- [nmap](https://nmap.org/)
- [PKINITtools](https://github.com/dirkjanm/PKINITtools)
- [pypykatz](https://github.com/skelsec/pypykatz)
- [smbcrawler](https://github.com/SySS-Research/smbcrawler)
- [smbmap](https://github.com/ShawnDEvans/smbmap)
- [sqlmap](https://github.com/sqlmapproject/sqlmap)
- [ultimate-nmap-parser](https://github.com/shifty0g/ultimate-nmap-parser)
- [volatility3](https://github.com/volatilityfoundation/volatility3/)

## Usage
The scripts use `podman` but can be easily adjusted to use `docker` (`CONTAINER_PROVIDER=docker`) instead.

Firstly run `build-pentest-container.sh` once to build the container.
```bash
$ ./build-pentest-container.sh
[2/2] STEP 1/13: FROM debian:bullseye-slim
Resolved "debian" as an alias (/etc/containers/registries.conf.d/000-shortnames.conf)
Trying to pull docker.io/library/debian:bullseye-slim...
Getting image source signatures
Copying blob 3f4ca61aafcd done
Copying config dd94cb6119 done
Writing manifest to image destination
Storing signatures
[...]
```
Then use `run-pentest-container.sh` to start an interactive session on the container.
```bash
$ ./run-pentest-container.sh
[+] Starting Container
[+] Usage: ./run-pentest-container.sh [-s /path/to/your/local/share] [<command>]
[+] Shared folder: local:/tmp/container-share -> container:/share

pentest-python-daa15e39f171:/share# python3 --version
Python 3.10.12
```

To use a custom share:
```bash
$ ./run-pentest-container.sh -s /home/user/work
[+] Starting Container
[+] Usage: ./run-pentest-container.sh [-s /path/to/your/local/share] [<command>]
[+] Shared folder: local:/home/user/work -> container:/share

pentest-python-a1ca5c50fb20:/share#
```

Alternatively, you can start the desired tool tools directly:
```bash
$ ./run-pentest-container.sh nmap -sSV -p 22 scanme.nmap.org -oN nmap-scanme-%D
[+] Starting Container
[+] Usage: ./run-pentest-container.sh [-s /path/to/your/local/share] [<command>]
[+] Shared folder: local:/tmp/container-share -> container:/share

Starting Nmap 7.80 ( https://nmap.org ) at 2023-08-28 13:03 UTC
Nmap scan report for scanme.nmap.org (45.33.32.156)
Host is up (0.040s latency).
Other addresses for scanme.nmap.org (not scanned): 2600:3c01::f03c:91ff:fe18:bb2f

PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 6.6.1p1 Ubuntu 2ubuntu2.13 (Ubuntu Linux; protocol 2.0)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 0.86 seconds
```

## Share the container to a system without internet
```bash
# on a machine with internet access
$ ./build-pentest-container.sh
[...]
$ podman save --output pentest-python-container.tar pentest-python
[...]

# copy the pentest-python-container.tar and ./run-pentest-container.sh to the target machine
$ podman load --input pentest-python-container.tar
[...]
./run-pentest-container.sh
[...]
```
